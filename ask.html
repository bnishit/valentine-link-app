<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Will you be my Valentine? ğŸ’˜</title>
  <meta property="og:title" content="Will you be my Valentine? ğŸ’˜" />
  <meta property="og:description" content="Tap and answer if you dare ğŸ˜Œ" />
  <style>
    :root{--txt:#351b2f;--muted:#7b6273;--yes:#ff4f9a;--yes2:#ff83b6;--lav:#b286ff}
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{margin:0;min-height:100svh;padding:14px;overflow:hidden;color:var(--txt);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:radial-gradient(1000px 600px at 15% -20%, #ffd6ea 0%, transparent 55%),radial-gradient(1000px 700px at 110% 0, #ffe8f3 0%, transparent 50%),linear-gradient(180deg,#fff1f8,#fff9fc);display:grid;place-items:center}
    .float{position:fixed;inset:0;pointer-events:none;opacity:.35}.float span{position:absolute;font-size:18px;animation:rise 10s linear infinite}
    .float span:nth-child(1){left:8%;top:90%}.float span:nth-child(2){left:24%;top:94%;animation-delay:1.1s}.float span:nth-child(3){left:46%;top:92%;animation-delay:2.5s}.float span:nth-child(4){left:71%;top:93%;animation-delay:3.9s}.float span:nth-child(5){left:89%;top:94%;animation-delay:5.3s}
    @keyframes rise{to{transform:translateY(-120vh);opacity:.1}}
    .card{width:min(760px,100%);border-radius:24px;padding:20px;text-align:center;background:rgba(255,255,255,.93);border:1px solid #ffd9ea;box-shadow:0 22px 55px rgba(214,37,118,.18)}
    h1{margin:6px 0 8px;font-size:clamp(1.45rem,4.8vw,2.25rem);line-height:1.15}.sub{color:var(--muted);margin-bottom:15px}
    .row{display:flex;justify-content:center;gap:10px;align-items:center;flex-wrap:wrap;min-height:74px}
    button{border:0;border-radius:12px;padding:12px 16px;font-weight:800;font-size:1rem;cursor:pointer;touch-action:manipulation}
    #yes{background:linear-gradient(135deg,var(--yes),var(--yes2),var(--lav));color:#fff;min-width:132px;box-shadow:0 10px 24px rgba(255,79,154,.3)}
    #no{background:#f0f2f7;color:#2f333b;min-width:106px}
    #result{margin-top:12px;min-height:34px;font-weight:700}
    .share{display:none;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:10px}
    .sbtn{border:1px solid #f2c6dd;background:#fff;color:#4f2e3e;padding:9px 11px;border-radius:10px;font-size:.9rem;font-weight:800}
    .tiny{font-size:.82rem;color:#806978;margin-top:8px} canvas{position:fixed;inset:0;pointer-events:none}
    @media (max-width:640px){.card{border-radius:18px;padding:14px}}
  </style>
</head>
<body>
  <div class="float" aria-hidden="true"><span>ğŸ’–</span><span>ğŸ’˜</span><span>ğŸŒ¸</span><span>âœ¨</span><span>ğŸ’</span></div>
  <canvas id="fx"></canvas>
  <main class="card">
    <div id="emoji" style="font-size:1.45rem">ğŸ’– ğŸ’˜ ğŸ’</div>
    <h1 id="title">Will you be my Valentine?</h1>
    <div class="sub" id="sub">Choose carefully ğŸ˜Œ</div>
    <div class="row"><button id="yes">Yes ğŸ’</button><button id="no">No ğŸ™ˆ</button></div>
    <div id="result"></div>
    <div class="share" id="shareWrap">
      <button class="sbtn" id="shareWa">ğŸŸ¢ Share on WhatsApp</button>
      <button class="sbtn" id="replyChallenge">ğŸ˜ˆ Send reply challenge</button>
      <button class="sbtn" id="createOwn">ğŸ’Œ Create your own</button>
    </div>
    <div style="margin-top:8px"><button id="musicBtn" class="sbtn">ğŸµ Music: Off</button></div>
    <div class="tiny">Made with mischief and love.</div>
  </main>

<script>
const p=new URLSearchParams(location.search);
const from=(p.get('from')||'Someone').slice(0,40), to=(p.get('to')||'You').slice(0,40), theme=p.get('theme')||'cute', tone=p.get('tone')||'classic', hook=p.get('hook')||'cute', lid=p.get('lid')||'anon';
const NS='valentine-link-app-v1';
const title=document.getElementById('title'), sub=document.getElementById('sub'), yes=document.getElementById('yes'), no=document.getElementById('no'), result=document.getElementById('result'), shareWrap=document.getElementById('shareWrap'), emoji=document.getElementById('emoji');
const esc=s=>s.replace(/[&<>'\"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;'}[c]));
const tones={classic:`${esc(to)}, will you be ${esc(from)}'s Valentine?`,funny:`${esc(to)}, will you accept ${esc(from)}'s premium proposal?`,filmy:`${esc(to)}, kya tum ${esc(from)} ki Valentine banogi/banoge?`};
const hookTxt={cute:'Open this, no cheating ğŸ‘€ğŸ’–',filmy:'Aaj answer dena padega ğŸ˜ŒğŸŒ¹',meme:'Warning: impossible question ahead ğŸ˜‚'};
title.innerHTML=tones[tone]||tones.classic;
if(theme==='chaos'){emoji.textContent='ğŸ’¥ ğŸ’˜ ğŸ˜ˆ';sub.textContent='Chaos mode activated. Handle with romance.'}
if(theme==='filmy'){emoji.textContent='ğŸ¬ ğŸŒ¹ ğŸ’˜';sub.textContent='Picture abhi baaki hai mere dostâ€¦'}
(async()=>{try{await fetch(`https://api.countapi.xyz/hit/${NS}/${encodeURIComponent(lid+':open')}`)}catch{}})();
let noMoves=0;
function moveNo(){noMoves++;const pad=8,maxX=Math.max(20,innerWidth-no.offsetWidth-pad*2),maxY=Math.max(20,innerHeight-no.offsetHeight-pad*2);no.style.position='fixed';no.style.left=(Math.floor(Math.random()*maxX)+pad)+'px';no.style.top=(Math.floor(Math.random()*maxY)+pad)+'px';no.style.zIndex='999';if(noMoves>=5){result.textContent='Nice try ğŸ˜ There was never really a No option.';no.textContent='Still No? ğŸ¤¨';yes.style.transform=`scale(${Math.min(1+noMoves*0.05,1.35)})`;}}
['pointerenter','touchstart','click'].forEach(ev=>no.addEventListener(ev,e=>{e.preventDefault();moveNo();},{passive:false}));
yes.addEventListener('click',async()=>{try{await fetch(`https://api.countapi.xyz/hit/${NS}/${encodeURIComponent(lid+':yes')}`)}catch{}result.textContent=`Yay! ${to} said YES to ${from}! ğŸ’–`;no.style.display='none';yes.textContent="It's a date! ğŸ‰";shareWrap.style.display='flex';burst();});
document.getElementById('shareWa').addEventListener('click',async()=>{try{await fetch(`https://api.countapi.xyz/hit/${NS}/${encodeURIComponent(lid+':share')}`)}catch{}const msg=`${to} said YES to ${from}! ğŸ’˜`;window.open(`https://wa.me/?text=${encodeURIComponent(msg+' '+location.href)}`,'_blank');});
document.getElementById('replyChallenge').addEventListener('click',async()=>{try{await fetch(`https://api.countapi.xyz/hit/${NS}/${encodeURIComponent(lid+':share')}`)}catch{}const msg=`Now your turn ğŸ˜ˆ ${hookTxt[hook] || 'Open this ğŸ’˜'} ${location.origin}/`;window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`,'_blank');});
document.getElementById('createOwn').addEventListener('click',()=>location.href=location.origin+'/');
const cvs=document.getElementById('fx'),ctx=cvs.getContext('2d');function resize(){cvs.width=innerWidth;cvs.height=innerHeight} resize(); addEventListener('resize',resize);let particles=[];function burst(){particles=[];for(let i=0;i<120;i++)particles.push({x:innerWidth/2,y:innerHeight/2,vx:(Math.random()-.5)*7,vy:(Math.random()-.9)*8,life:80+Math.random()*40,size:9+Math.random()*8,rot:Math.random()*Math.PI});requestAnimationFrame(tick)}function tick(){ctx.clearRect(0,0,cvs.width,cvs.height);particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.vy+=.08;p.life--;p.rot+=.08;ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.rot);ctx.globalAlpha=Math.max(p.life/120,0);ctx.font=`${p.size}px serif`;ctx.fillText(Math.random()>.5?'ğŸ’–':'âœ¨',0,0);ctx.restore()});particles=particles.filter(p=>p.life>0);if(particles.length)requestAnimationFrame(tick)}

let mCtx,m1,m2,mGain,mOn=false;
document.getElementById('musicBtn').onclick=()=>{
  if(!mOn){
    mCtx=new (window.AudioContext||window.webkitAudioContext)();
    mGain=mCtx.createGain(); mGain.gain.value=0.02; mGain.connect(mCtx.destination);
    m1=mCtx.createOscillator(); m2=mCtx.createOscillator();
    m1.type='sine'; m2.type='triangle'; m1.connect(mGain); m2.connect(mGain); m1.start(); m2.start();
    const notes=[261.63,293.66,329.63,392,329.63,293.66]; let i=0;
    const loop=()=>{ if(!mOn) return; m1.frequency.setValueAtTime(notes[i%notes.length],mCtx.currentTime); m2.frequency.setValueAtTime(notes[(i+2)%notes.length],mCtx.currentTime); i++; setTimeout(loop,900); };
    mOn=true; loop(); document.getElementById('musicBtn').textContent='ğŸµ Music: On';
  } else {
    mOn=false; try{m1.stop();m2.stop();mCtx.close();}catch{} document.getElementById('musicBtn').textContent='ğŸµ Music: Off';
  }
}
</script>
</body>
</html>