<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Will you be my Valentine? ğŸ’˜</title>
  <style>
    :root{--bg:#fff1f7;--bg2:#fff9fc;--card:#fff;--text:#2a1520;--yes:#ff3d8e;--yes2:#ff7aa9;--muted:#6f5a64}
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{margin:0;min-height:100svh;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:radial-gradient(circle at 0% 0%,#ffdcea,transparent 40%),radial-gradient(circle at 100% 0%,#ffe8f2,transparent 35%),linear-gradient(180deg,var(--bg),var(--bg2));display:grid;place-items:center;padding:14px;color:var(--text);overflow:hidden}
    .card{width:min(760px,100%);background:var(--card);border-radius:24px;padding:20px;text-align:center;box-shadow:0 18px 48px rgba(200,39,112,.16);border:1px solid #ffdceb;position:relative}
    h1{margin:6px 0 8px;font-size:clamp(1.4rem,4.8vw,2.2rem);line-height:1.2}
    .sub{color:var(--muted);margin-bottom:16px}
    .row{display:flex;justify-content:center;gap:10px;align-items:center;flex-wrap:wrap;min-height:72px}
    button{border:0;border-radius:12px;padding:12px 16px;font-weight:800;font-size:1rem;cursor:pointer;touch-action:manipulation}
    #yes{background:linear-gradient(135deg,var(--yes),var(--yes2));color:#fff;min-width:120px}
    #no{background:#f4f5f7;color:#31343a;min-width:100px}
    #result{margin-top:12px;min-height:34px;font-weight:700}
    .share{display:none;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:10px}
    .sbtn{border:1px solid #ffd2e3;background:#fff;color:#4b2c39;padding:9px 11px;border-radius:10px;font-size:.9rem;font-weight:700}
    .tiny{font-size:.82rem;color:#7d6571;margin-top:8px}
    canvas{position:fixed;inset:0;pointer-events:none}
    @media (max-width:640px){ .card{border-radius:18px;padding:14px} }
  </style>
</head>
<body>
  <canvas id="fx"></canvas>
  <main class="card" id="card">
    <div id="emoji" style="font-size:1.4rem">ğŸ’– ğŸ’˜ ğŸ’</div>
    <h1 id="title">Will you be my Valentine?</h1>
    <div class="sub" id="sub">Choose carefully ğŸ˜Œ</div>

    <div class="row" id="row">
      <button id="yes">Yes ğŸ’</button>
      <button id="no">No ğŸ™ˆ</button>
    </div>

    <div id="result"></div>

    <div class="share" id="shareWrap">
      <button class="sbtn" id="shareWa">ğŸŸ¢ Share on WhatsApp</button>
      <button class="sbtn" id="createOwn">ğŸ’Œ Create your own</button>
    </div>
    <div class="tiny">Made with mischief and love.</div>
  </main>

<script>
const p=new URLSearchParams(location.search);
const from=(p.get('from')||'Someone').slice(0,40);
const to=(p.get('to')||'You').slice(0,40);
const theme=p.get('theme')||'cute';
const tone=p.get('tone')||'classic';

const title=document.getElementById('title');
const sub=document.getElementById('sub');
const yes=document.getElementById('yes');
const no=document.getElementById('no');
const result=document.getElementById('result');
const shareWrap=document.getElementById('shareWrap');
const emoji=document.getElementById('emoji');

const esc=s=>s.replace(/[&<>'\"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;'}[c]));

const tones={
  classic:`${esc(to)}, will you be ${esc(from)}'s Valentine?`,
  funny:`${esc(to)}, will you accept ${esc(from)}'s premium proposal?`,
  filmy:`${esc(to)}, kya tum ${esc(from)} ki Valentine banogi/banoge?`
};

title.innerHTML=tones[tone]||tones.classic;

if(theme==='chaos'){
  document.body.style.filter='saturate(1.1)';
  emoji.textContent='ğŸ’¥ ğŸ’˜ ğŸ˜ˆ';
  sub.textContent='This page has chaotic romance energy.';
}
if(theme==='filmy'){
  emoji.textContent='ğŸ¬ ğŸŒ¹ ğŸ’˜';
  sub.textContent='Picture abhi baaki hai mere dostâ€¦';
}

let noMoves=0;
function moveNo(){
  noMoves++;
  const pad=8;
  const maxX=Math.max(20, window.innerWidth-no.offsetWidth-pad*2);
  const maxY=Math.max(20, window.innerHeight-no.offsetHeight-pad*2);
  const x=Math.floor(Math.random()*maxX)+pad;
  const y=Math.floor(Math.random()*maxY)+pad;
  no.style.position='fixed';
  no.style.left=x+'px';
  no.style.top=y+'px';
  no.style.zIndex='999';
  if(noMoves>=5){
    result.textContent='Nice try ğŸ˜ There was never really a No option.';
    no.textContent='Still No? ğŸ¤¨';
    yes.style.transform=`scale(${Math.min(1+noMoves*0.05,1.35)})`;
  }
}

['pointerenter','touchstart','click'].forEach(ev=>{
  no.addEventListener(ev,(e)=>{e.preventDefault();moveNo();},{passive:false});
});

yes.addEventListener('click',()=>{
  result.textContent=`Yay! ${to} said YES to ${from}! ğŸ’–`;
  no.style.display='none';
  yes.textContent="It's a date! ğŸ‰";
  shareWrap.style.display='flex';
  burst();
});

document.getElementById('shareWa').addEventListener('click',()=>{
  const msg=`${to} said YES to ${from}! ğŸ’˜`; 
  window.open(`https://wa.me/?text=${encodeURIComponent(msg+' '+location.href)}`,'_blank');
});
document.getElementById('createOwn').addEventListener('click',()=>{
  location.href=location.origin+'/';
});

// Tiny confetti hearts
const cvs=document.getElementById('fx'); const ctx=cvs.getContext('2d');
function resize(){cvs.width=innerWidth;cvs.height=innerHeight} resize(); addEventListener('resize',resize);
let particles=[];
function burst(){
  particles=[];
  for(let i=0;i<120;i++) particles.push({x:innerWidth/2,y:innerHeight/2,vx:(Math.random()-0.5)*7,vy:(Math.random()-0.9)*8,life:80+Math.random()*40,size:8+Math.random()*8,rot:Math.random()*Math.PI});
  requestAnimationFrame(tick);
}
function tick(){
  ctx.clearRect(0,0,cvs.width,cvs.height);
  particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.vy+=0.08;p.life-=1;p.rot+=0.08;ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.rot);ctx.globalAlpha=Math.max(p.life/120,0);ctx.font=`${p.size}px serif`;ctx.fillText(Math.random()>.5?'ğŸ’–':'âœ¨',0,0);ctx.restore();});
  particles=particles.filter(p=>p.life>0);
  if(particles.length) requestAnimationFrame(tick);
}
</script>
</body>
</html>